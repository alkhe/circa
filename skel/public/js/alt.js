"use strict";!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.Alt=t()}}(function(){return function t(e,n,r){function i(o,a){if(!n[o]){if(!e[o]){var c="function"==typeof require&&require;if(!a&&c)return c(o,!0);if(s)return s(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var h=n[o]={exports:{}};e[o][0].call(h.exports,function(t){var n=e[o][1][t];return i(n?n:t)},h,h.exports,t,e,n,r)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(t,e){function n(t){if(this instanceof n)throw new TypeError("Symbol is not a constructor");t=void 0===t?"":String(t);var e=p(t);return u?i(v,{__description__:a(t),__tag__:a(e)}):e}var r={},i=Object.create,s=Object.defineProperties,o=Object.defineProperty,a=function(t){var e=void 0===arguments[1]?{}:arguments[1];return{value:t,configurable:!!e.c,writable:!!e.w,enumerable:!!e.e}},c=function(t){return t&&"Symbol"===t[n.toStringTag]},u=void 0;try{var h=o({},"y",{get:function(){return 1}});u=1===h.y}catch(f){u=!1}var l={},p=function(t){t=String(t);for(var e="",n=0;l[t+e];)e=n+=1;l[t+e]=1;var r="Symbol("+t+e+")";return u&&o(Object.prototype,r,{get:void 0,set:function(t){o(this,r,a(t,{c:!0,w:!0}))},configurable:!0,enumerable:!1}),r},v=i(null);s(n,{"for":a(function(t){var e=String(t);if(r[e])return r[e];var i=n(e);return r[e]=i,i}),keyFor:a(function(t){if(!c(t))throw new TypeError(""+t+" is not a symbol");for(var e in r)if(r[e]===t)return r[e].__description__})}),s(n,{hasInstance:a(n("hasInstance")),isConcatSpreadable:a(n("isConcatSpreadable")),iterator:a(n("iterator")),match:a(n("match")),replace:a(n("replace")),search:a(n("search")),species:a(n("species")),split:a(n("split")),toPrimitive:a(n("toPrimitive")),toStringTag:a(n("toStringTag")),unscopables:a(n("unscopables"))}),s(v,{constructor:a(n),toString:a(function(){return this.__tag__}),valueOf:a(function(){return"Symbol("+this.__description__+")"})}),u&&o(v,n.toStringTag,a("Symbol",{c:!0})),e.exports="function"==typeof Symbol?Symbol:n},{}],2:[function(t,e){function n(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function r(){}r.prototype._events=void 0,r.prototype.listeners=function(t){if(!this._events||!this._events[t])return[];if(this._events[t].fn)return[this._events[t].fn];for(var e=0,n=this._events[t].length,r=new Array(n);n>e;e++)r[e]=this._events[t][e].fn;return r},r.prototype.emit=function(t,e,n,r,i,s){if(!this._events||!this._events[t])return!1;var o,a,c=this._events[t],u=arguments.length;if("function"==typeof c.fn){switch(c.once&&this.removeListener(t,c.fn,!0),u){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,n),!0;case 4:return c.fn.call(c.context,e,n,r),!0;case 5:return c.fn.call(c.context,e,n,r,i),!0;case 6:return c.fn.call(c.context,e,n,r,i,s),!0}for(a=1,o=new Array(u-1);u>a;a++)o[a-1]=arguments[a];c.fn.apply(c.context,o)}else{var h,f=c.length;for(a=0;f>a;a++)switch(c[a].once&&this.removeListener(t,c[a].fn,!0),u){case 1:c[a].fn.call(c[a].context);break;case 2:c[a].fn.call(c[a].context,e);break;case 3:c[a].fn.call(c[a].context,e,n);break;default:if(!o)for(h=1,o=new Array(u-1);u>h;h++)o[h-1]=arguments[h];c[a].fn.apply(c[a].context,o)}}return!0},r.prototype.on=function(t,e,r){var i=new n(e,r||this);return this._events||(this._events={}),this._events[t]?this._events[t].fn?this._events[t]=[this._events[t],i]:this._events[t].push(i):this._events[t]=i,this},r.prototype.once=function(t,e,r){var i=new n(e,r||this,!0);return this._events||(this._events={}),this._events[t]?this._events[t].fn?this._events[t]=[this._events[t],i]:this._events[t].push(i):this._events[t]=i,this},r.prototype.removeListener=function(t,e,n){if(!this._events||!this._events[t])return this;var r=this._events[t],i=[];if(e&&(r.fn&&(r.fn!==e||n&&!r.once)&&i.push(r),!r.fn))for(var s=0,o=r.length;o>s;s++)(r[s].fn!==e||n&&!r[s].once)&&i.push(r[s]);return i.length?this._events[t]=1===i.length?i[0]:i:delete this._events[t],this},r.prototype.removeAllListeners=function(t){return this._events?(t?delete this._events[t]:this._events={},this):this},r.prototype.off=r.prototype.removeListener,r.prototype.addListener=r.prototype.on,r.prototype.setMaxListeners=function(){return this},r.EventEmitter=r,r.EventEmitter2=r,r.EventEmitter3=r,e.exports=r},{}],3:[function(t,e){e.exports.Dispatcher=t("./lib/Dispatcher")},{"./lib/Dispatcher":4}],4:[function(t,e){function n(){this.$Dispatcher_callbacks={},this.$Dispatcher_isPending={},this.$Dispatcher_isHandled={},this.$Dispatcher_isDispatching=!1,this.$Dispatcher_pendingPayload=null}var r=t("./invariant"),i=1,s="ID_";n.prototype.register=function(t){var e=s+i++;return this.$Dispatcher_callbacks[e]=t,e},n.prototype.unregister=function(t){r(this.$Dispatcher_callbacks[t],"Dispatcher.unregister(...): `%s` does not map to a registered callback.",t),delete this.$Dispatcher_callbacks[t]},n.prototype.waitFor=function(t){r(this.$Dispatcher_isDispatching,"Dispatcher.waitFor(...): Must be invoked while dispatching.");for(var e=0;e<t.length;e++){var n=t[e];this.$Dispatcher_isPending[n]?r(this.$Dispatcher_isHandled[n],"Dispatcher.waitFor(...): Circular dependency detected while waiting for `%s`.",n):(r(this.$Dispatcher_callbacks[n],"Dispatcher.waitFor(...): `%s` does not map to a registered callback.",n),this.$Dispatcher_invokeCallback(n))}},n.prototype.dispatch=function(t){r(!this.$Dispatcher_isDispatching,"Dispatch.dispatch(...): Cannot dispatch in the middle of a dispatch."),this.$Dispatcher_startDispatching(t);try{for(var e in this.$Dispatcher_callbacks)this.$Dispatcher_isPending[e]||this.$Dispatcher_invokeCallback(e)}finally{this.$Dispatcher_stopDispatching()}},n.prototype.isDispatching=function(){return this.$Dispatcher_isDispatching},n.prototype.$Dispatcher_invokeCallback=function(t){this.$Dispatcher_isPending[t]=!0,this.$Dispatcher_callbacks[t](this.$Dispatcher_pendingPayload),this.$Dispatcher_isHandled[t]=!0},n.prototype.$Dispatcher_startDispatching=function(t){for(var e in this.$Dispatcher_callbacks)this.$Dispatcher_isPending[e]=!1,this.$Dispatcher_isHandled[e]=!1;this.$Dispatcher_pendingPayload=t,this.$Dispatcher_isDispatching=!0},n.prototype.$Dispatcher_stopDispatching=function(){this.$Dispatcher_pendingPayload=null,this.$Dispatcher_isDispatching=!1},e.exports=n},{"./invariant":5}],5:[function(t,e){var n=function(t,e,n,r,i,s,o,a){if(!t){var c;if(void 0===e)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,i,s,o,a],h=0;c=new Error("Invariant Violation: "+e.replace(/%s/g,function(){return u[h++]}))}throw c.framesToPop=1,c}};e.exports=n},{}],6:[function(t,e){function n(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}e.exports=Object.assign||function(t){for(var e,r,i=n(t),s=1;s<arguments.length;s++){e=arguments[s],r=Object.keys(Object(e));for(var o=0;o<r.length;o++)i[r[o]]=e[r[o]]}return i}},{}],7:[function(t,e){function n(t){return t.replace(/[a-z]([A-Z])/g,function(t){return""+t[0]+"_"+t[1].toLowerCase()}).toUpperCase()}function r(t,e){for(var n=0,r=e;Object.hasOwnProperty.call(t,r);)r=e+String(++n);return r}function i(){}var s=function(t){return t&&t.__esModule?t["default"]:t},o=function(t,e,n){for(var r=!0;r;){r=!1;var i=t,s=e,o=n;a=u=c=void 0;var a=Object.getOwnPropertyDescriptor(i,s);{if(void 0!==a){if("value"in a&&a.writable)return a.value;var c=a.get;return void 0===c?void 0:c.call(o)}var u=Object.getPrototypeOf(i);if(null===u)return void 0;t=u,e=s,n=o,r=!0}}},a=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)},c=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},h=t("flux").Dispatcher,f=s(t("eventemitter3")),l=s(t("es-symbol")),p=s(t("object-assign")),v=l("action creator handler"),d=l("holds the actions uid symbol for listening"),g=l("the actions uid name"),y=l("name of listeners"),b=l("event emitter instance"),m=l("init snapshot storage"),_=l("last snapshot storage"),w=l("store lifecycle listeners"),D=l("stores action listeners storage"),O=l("store public method storage"),S=l("the state container"),k={},x=Object.getOwnPropertyNames(i),A=Object.getOwnPropertyNames(i.prototype),E=function(t,e){return Object.getOwnPropertyNames(t).reduce(function(n,r){return-1!==e.indexOf(r)?n:(n[r]=t[r],n)},{})},$=function(){function t(e,n,r,i){var s=this;u(this,t),this[b]=new f,this[w]={},this[S]=r||n,this.boundListeners=n[y],this.StoreModel=i,"object"==typeof this.StoreModel&&(this.StoreModel.state=p({},i.state)),p(this[w],n[w]),p(this,n[O]),this.dispatchToken=e.register(function(t){if(n[D][t.action]){var e=n[D][t.action](t.data);e!==!1&&s.emitChange()}}),this[w].init&&this[w].init()}return c(t,{getEventEmitter:{value:function(){return this[b]}},emitChange:{value:function(){this[b].emit("change",this[S])}},listen:{value:function(t){this[b].on("change",t)}},unlisten:{value:function(t){this[b].removeListener("change",t)}},getState:{value:function(){var t=this[S];return Object.keys(t).reduce(function(e,n){return e[n]=t[n],e},{})}}}),t}(),j=function(){function t(e,n,r,i){u(this,t),this[g]=n,this[v]=r.bind(this),this.actions=i,this.alt=e}return c(t,{dispatch:{value:function(t){this.alt.dispatch(this[g],t)}}}),t}(),P={on:function(t,e){this[w][t]=e.bind(this)},bindAction:function(t,e){if(!t)throw new ReferenceError("Invalid action reference passed in");if("function"!=typeof e)throw new TypeError("bindAction expects a function");if(e.length>1)throw new TypeError("Action handler in store "+this._storeName+" for "+(""+(t[d]||t).toString()+" was defined with 2 ")+"parameters. Only a single parameter is passed through the dispatcher, did you mean to pass in an Object instead?");var n=t[d]?t[d]:t;this[D][n]=e.bind(this),this[y].push(l.keyFor(n))},bindActions:function(t){var e=this;Object.keys(t).forEach(function(n){var r=t[n],i=/./,s=n.replace(i,function(t){return"on"+t[0].toUpperCase()}),o=null;if(e[n]&&e[s])throw new ReferenceError("You have multiple action handlers bound to an action: "+(""+n+" and "+s));e[n]?o=e[n]:e[s]&&(o=e[s]),o&&e.bindAction(r,o)})},bindListeners:function(t){var e=this;Object.keys(t).forEach(function(n){var r=t[n],i=e[n];if(!i)throw new ReferenceError(""+n+" defined but does not exist in "+e._storeName);Array.isArray(r)?r.forEach(function(t){e.bindAction(t,i)}):e.bindAction(r,i)})}},C={waitFor:function(t){if(!t)throw new ReferenceError("Dispatch tokens not provided");t=1===arguments.length?Array.isArray(t)?t:[t]:Array.prototype.slice.call(arguments);var e=t.map(function(t){return t.dispatchToken||t});this.dispatcher.waitFor(e)},exportPublicMethods:function(t){var e=this;Object.keys(t).forEach(function(n){if("function"!=typeof t[n])throw new TypeError("exportPublicMethods expects a function");e[O][n]=t[n]})},emitChange:function(){this.getInstance().emitChange()}},N=function(t,e,n){var r=JSON.parse(e);Object.keys(r).forEach(function(e){var i=t.stores[e];i&&(i[w].deserialize&&(r[e]=i[w].deserialize(r[e])||r[e]),p(i[S],r[e]),n(i))})},T=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;e>r;r++)n[r-1]=arguments[r];var i=n.length?n:Object.keys(t.stores);return i.reduce(function(e,n){var r=t.stores[n];r[w].snapshot&&r[w].snapshot();var i=r[w].serialize&&r[w].serialize();return e[n]=i?i:r.getState(),e},{})},L=function(t,e){var n=t.stores[e][S],r=JSON.parse(t[m]);r[e]=n,t[m]=JSON.stringify(r),t[_]=t[m]},M=function(t,e){var n=JSON.parse(t),r=e.reduce(function(t,e){if(!n[e])throw new ReferenceError(""+e+" is not a valid store");return t[e]=n[e],t},{});return JSON.stringify(r)},F=function(t,e,n,r){var i=void 0,s={};return s[y]=[],s[w]={},s[D]={},p(s,{_storeName:n,alt:t,dispatcher:t.dispatcher,getInstance:function(){return i},setState:function(){var t=void 0===arguments[0]?{}:arguments[0];return p(this.state,t),this.emitChange(),!1}},P,C,e),s.bindListeners&&P.bindListeners.call(s,s.bindListeners),s.lifecycle&&Object.keys(s.lifecycle).forEach(function(t){P.on.call(s,t,s.lifecycle[t])}),i=p(new $(t.dispatcher,s,s.state,e),s.publicMethods),r&&(t.stores[n]=i,L(t,n)),i},J=function(){function t(){u(this,t),this.dispatcher=new h,this.actions={},this.stores={},this[_]=this[m]="{}"}return c(t,{dispatch:{value:function(t,e){this.dispatcher.dispatch({action:t,data:e})}},createStore:{value:function(t,e){var n=void 0===arguments[2]?!0:arguments[2],i=void 0,s=e||t.name||t.displayName||"";if(!n||!this.stores[s]&&s||("undefined"!=typeof console&&console.warn(this.stores[s]?new ReferenceError("A store named "+s+" already exists, double check your store names or pass in your own custom identifier for each store"):new ReferenceError("Store name was not specified")),s=r(this.stores,s)),"object"==typeof t)return F(this,t,s,n);var c=function(t){function e(t){u(this,e),o(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t)}return a(e,t),e}(t);p(c.prototype,P,C,{_storeName:s,alt:this,dispatcher:this.dispatcher,getInstance:function(){return i},setState:function(){var t=void 0===arguments[0]?{}:arguments[0];return p(this,t),this.emitChange(),!1}}),c.prototype[y]=[],c.prototype[w]={},c.prototype[D]={},c.prototype[O]={};var h=new c(this);return i=p(new $(this.dispatcher,h,null,t),E(t,x)),n&&(this.stores[s]=i,L(this,s)),i}},generateActions:{value:function(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];return this.createActions(function(){var t;(t=this).generateActions.apply(t,e)})}},createActions:{value:function(t){var e=this,i=void 0===arguments[1]?{}:arguments[1],s=p({},E(t.prototype,A)),h=t.name||t.displayName||"",f=function(t){function e(t){u(this,e),o(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t)}return a(e,t),c(e,{generateActions:{value:function(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];e.forEach(function(t){s[t]=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;e>r;r++)n[r-1]=arguments[r];this.dispatch(n.length?[t].concat(n):t)}})}}}),e}(t);return new f(this),Object.keys(s).reduce(function(t,i){var o=n(i),a=r(k,""+h+"#"+i);k[a]=1;var c=l["for"](a),u=new j(e,c,s[i],t);return t[i]=u[v],t[i].defer=function(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];setTimeout(function(){u[v].apply(null,e)})},t[i][d]=c,t[o]=c,t},i)}},takeSnapshot:{value:function(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];var r=T.apply(void 0,[this].concat(e));return this[_]=JSON.stringify(p(JSON.parse(this[_]),r)),JSON.stringify(r)}},rollback:{value:function(){N(this,this[_],function(t){t[w].rollback&&t[w].rollback(),t.emitChange()})}},recycle:{value:function(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];var r=e.length?M(this[m],e):this[m];N(this,r,function(t){t[w].init&&t[w].init()})}},flush:{value:function(){var t=JSON.stringify(T(this));return this.recycle(),t}},bootstrap:{value:function(t){N(this,t,function(t){t[w].bootstrap&&t[w].bootstrap(),t.emitChange()})}},addActions:{value:function(t,e){this.actions[t]=this.createActions(e)}},addStore:{value:function(t,e,n){this.createStore(e,t,n)}},getActions:{value:function(t){return this.actions[t]}},getStore:{value:function(t){return this.stores[t]}}}),t}();e.exports=J},{"es-symbol":1,eventemitter3:2,flux:3,"object-assign":6}]},{},[7])(7)});
//# sourceMappingURL=alt.js.map